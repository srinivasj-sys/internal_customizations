{"onFirstLoad":{"inputs":[],"logic":[{"action":"execfunc","function":"loadUserCapabilities","id":"7e2e43b7-4dc4-48e6-80ad-d4b392a1cad8","library":"CirrusLibCirrusObject","params":{}},{"action":"execfunc","function":"setMenuItems","id":"835794de-ff09-4cbb-bacd-4a8bccc06ebf","library":"$interactions$","params":{}}],"sasProvided":true},"setMenuItems":{"inputs":[],"logic":[{"action":"setvar","id":"81095d26-3541-4229-9aac-9c8dcb29376e","type":"calculated","value":{"function":"getAllMenuItems","library":"CirrusLibMenu","params":{},"returnType":"text array"},"variable":{"datatype":"text array","name":"allMenuItems","scope":"local"}},{"action":"setvar","id":"9c50d23d-63b8-4631-9368-6998f972fcc3","type":"fixed","value":{"datatype":"text","dataval":"id"},"variable":{"datatype":"text","name":"idStr","scope":"local"}},{"action":"setvar","id":"49d63447-63a3-4f23-a68c-2ae0cef34182","type":"calculated","value":{"function":"map","library":"CirrusLibArray","params":{"array":{"datatype":"text array","name":"allMenuItems","scope":"local"},"callback":{"function":"get","library":"CirrusLibObject","params":{"name":{"datatype":"text","name":"idStr","scope":"local"},"object":{"datatype":"text","label":"Current value","name":"loop_currentValue","scope":"local"}}}}},"variable":{"datatype":"text array","name":"allMenuItemIDs","scope":"local"}},{"action":"setvar","id":"80550f92-cf0c-4e9c-a8b6-b2ef3153a2fd","type":"fixed","value":{"datatype":"text","dataval":","},"variable":{"datatype":"text","name":"comma","scope":"local"}},{"action":"setvar","id":"fed43851-666f-4623-bca0-fb9f3bfd8e61","type":"fixed","value":{"datatype":"text","dataval":"Home,Search"},"variable":{"datatype":"text","name":"alwaysVisibleMenuItems","scope":"local"}},{"action":"setvar","id":"a83290a6-a315-4c83-bba6-7d4442b5ad98","type":"calculated","value":{"function":"split","library":"CirrusLibString","params":{"separator":{"datatype":"text","name":"comma","scope":"local"},"string":{"datatype":"text","name":"alwaysVisibleMenuItems","scope":"local"}},"returnType":"text array"},"variable":{"datatype":"text array","name":"alwaysVisibleMenuItemsArr","scope":"local"}},{"action":"setvar","id":"415c64b8-c865-4f8c-aa44-0b56f1ea536e","type":"calculated","value":{"function":"getObjectRestPathsThatCurrentUserCanRead","library":"CirrusLibCirrusObject","params":{},"returnType":"text array"},"variable":{"datatype":"text array","name":"restPathsThatUserCanRead","scope":"local"}},{"action":"setvar","comment":"We are assuming that menu items associated with object pages have an ID that matches the restPath of the object.  Otherwise, we can't map the menu item to the object to retrieve capabilities.","id":"6e89d88c-2b1c-4e5d-9428-c5a005be7601","type":"calculated","value":{"function":"getIntersection","library":"CirrusLibArray","params":{"array1":{"datatype":"text array","name":"allMenuItemIDs","scope":"local"},"array2":{"datatype":"text array","name":"restPathsThatUserCanRead","scope":"local"}},"returnType":"text array"},"variable":{"datatype":"text array","name":"objectMenuItemsThatUserCanRead","scope":"local"}},{"action":"setvar","id":"e9613c37-7742-4597-88c6-bfbff79edf45","type":"fixed","value":{"datatype":"text","dataval":"DataLoad"},"variable":{"datatype":"text","name":"adminMenuItems","scope":"local"}},{"action":"setvar","id":"d4dcb1d5-6dbf-4b55-98f6-17220613154e","type":"calculated","value":{"function":"split","library":"CirrusLibString","params":{"separator":{"datatype":"text","name":"comma","scope":"local"},"string":{"datatype":"text","name":"adminMenuItems","scope":"local"}},"returnType":"text array"},"variable":{"datatype":"text array","name":"adminMenuItemsArr","scope":"local"}},{"action":"setvar","id":"3e3c045a-a98f-4e6d-9a67-7d9a33ad519b","type":"calculated","value":{"function":"isCurrentUserAdministrator","library":"CirrusLibCurrentUser","params":{},"returnType":"boolean"},"variable":{"datatype":"boolean","name":"isCurrentUserAdmin","scope":"local"}},{"action":"ifelse","id":"ec71db38-64f8-45d3-af8e-a96186bd982a","includeElse":true,"test":{"datatype":"boolean","name":"isCurrentUserAdmin","scope":"local"}},{"action":"setvar","id":"1b6e81f9-13bf-42a1-b16d-a25b0207a272","type":"calculated","value":{"function":"getUnionWithoutDuplicates","library":"CirrusLibArray","params":{"array1":{"datatype":"text array","name":"alwaysVisibleMenuItemsArr","scope":"local"},"array2":{"datatype":"text array","name":"adminMenuItemsArr","scope":"local"}},"returnType":"text array"},"variable":{"datatype":"text array","name":"menuItemsWithoutObjItems","scope":"local"}},{"action":"ifelse","id":"8c079de6-f7fd-42a2-be2d-21cbbe51112e","includeElse":true,"iselse":true,"main":"ec71db38-64f8-45d3-af8e-a96186bd982a","test":{"datatype":"boolean","name":"isCurrentUserAdmin","scope":"local"}},{"action":"setvar","id":"f61fd9d7-47c0-4168-84c8-b94c9087b8a4","type":"variable","value":{"datatype":"text array","name":"alwaysVisibleMenuItemsArr","scope":"local"},"variable":{"datatype":"text array","name":"menuItemsWithoutObjItems","scope":"local"}},{"action":"ifelse","end":true,"id":"88fe659e-6b2d-4d7d-9885-1b3e8bb35b31","includeElse":true,"main":"ec71db38-64f8-45d3-af8e-a96186bd982a","test":{"datatype":"boolean","name":"isCurrentUserAdmin","scope":"local"}},{"action":"setvar","id":"110d1e3d-2d22-4ec4-95f7-785295618032","type":"calculated","value":{"function":"getUnionWithoutDuplicates","library":"CirrusLibArray","params":{"array1":{"datatype":"text array","name":"menuItemsWithoutObjItems","scope":"local"},"array2":{"datatype":"text array","name":"objectMenuItemsThatUserCanRead","scope":"local"}},"returnType":"text array"},"variable":{"datatype":"text array","name":"finalMenuItems","scope":"local"}},{"action":"execfunc","function":"setMenuItems","id":"e3231ddd-e348-45a0-871d-3e2ee6460746","library":"CirrusLibMenu","params":{"menuItemIDs":{"datatype":"text array","name":"finalMenuItems","scope":"local"}}}],"sasProvided":true}}